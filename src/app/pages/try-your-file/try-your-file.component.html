<div class="font-semibold">Try with your file (preview only)</div>
<div class="text-sm text-gray-600 mb-3">
    Preview only. We don’t store your file. Max 10 MB. PDF up to 10 pages.
</div>

<label class="block border-2 border-dashed rounded-xl p-5 text-center cursor-pointer hover:bg-gray-50"
       [class.opacity-50]="busy" [class.pointer-events-none]="busy">
  <div class="text-sm">Click to choose file (PDF, PNG, JPG)</div>
  <input type="file" class="hidden" accept=".pdf,.png,.jpg,.jpeg"
         (change)="onFileSelected($event)" [disabled]="busy" />
</label>

<nz-alert *ngIf="errorMsg" class="mt-3" nzType="error" [nzMessage]="errorMsg"></nz-alert>

<div class="mt-2">
    <div class="rounded-lg border overflow-hidden">
      <nz-spin [nzSpinning]="busy" nzTip="Processing…" [nzDelay]="150">
        <ng-container *ngIf="safePreviewUrl; else emptySlot">
          <ng-container *ngIf="isPdf; else imageView">
            <iframe class="w-full h-[65vh] md:h-[70vh]"
                    [src]="safePreviewUrl"
                    title="Watermarked PDF"></iframe>
          </ng-container>

          <ng-template #imageView>
            <img class="w-full max-h-[70vh] object-contain"
                 [src]="objectUrl!"
                 alt="Watermarked preview" />
          </ng-template>
        </ng-container>
  
        <ng-template #emptySlot>
          <div class="h-[50vh] md:h-[60vh] grid place-items-center text-gray-400 text-sm">
            No preview yet
          </div>
        </ng-template>
  
      </nz-spin>
    </div>
    <div class="text-xs text-gray-500 mt-2">
      Watermark is intentionally visible.
    </div>
</div>